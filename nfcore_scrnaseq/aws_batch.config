/*
 * nf-core/scrnaseq AWS Batch configuration
 *
 * This config enables full pipeline including CellBender EmptyDrops
 * with GPU support on AWS.
 */

params {
    // Input/Output - update these for your S3 paths
    input = 's3://your-bucket/samplesheet.csv'
    outdir = 's3://your-bucket/results'

    // Reference files - can use S3 or iGenomes
    fasta = 's3://your-bucket/references/genome.fa'
    gtf = 's3://your-bucket/references/genes.gtf'

    // Pipeline settings
    aligner = 'alevin'
    protocol = '10XV3'
    simpleaf_rlen = 91

    // ENABLE CellBender EmptyDrops (don't skip!)
    skip_emptydrops = false

    // Save reference for reuse
    save_reference = true
}

// AWS Batch configuration
process {
    executor = 'awsbatch'
    queue = 'YOUR_CPU_QUEUE'  // Replace with your queue name

    // GPU processes (CellBender)
    withName: 'CELLBENDER_REMOVEBACKGROUND' {
        queue = 'YOUR_GPU_QUEUE'  // Replace with GPU queue
        accelerator = 1
        memory = '32 GB'
        cpus = 8
    }
}

// AWS settings
aws {
    region = 'us-east-1'  // Update to your region
}

// Docker enabled for AWS Batch
docker.enabled = true
